[TOC]

# QT基本控件

Qt的三大基本窗口

+ QMainWindow  主窗口
+ QWidget  窗口控件
+ QDialog  对话框



## 基础控件QWidget

在QT中`QWidget`类是所有用户界面对象的基类

`QWidget`类继承自`QObject`和`QPaintDevice`类

+ `QObject`支持Qt对象模型
+ `QPaintDevice`是所有可以绘制的对象的基类



```cpp
// 新建QWidget类对象，默认parent参数是0，所以它是个窗口
QWidget *widget = new QWidget();
// 设置窗口标题
widget->setWindowTitle(QObject::tr("我是widget")); 
// 新建QLabel对象，默认parent参数是0，所以它是个窗口
QLabel *label = new QLabel();
label->setWindowTitle(QObject::tr("我是label"));
// 设置要显示的信息
label->setText(QObject::tr("label:我是个窗口"));   
// 改变部件大小，以便能显示出完整的内容
label->resize(180, 20);  
// label2指定了父窗口为widget，所以不是窗口
QLabel *label2 = new QLabel(widget);
//给label2设置文字
label2->setText(QObject::tr("label2:我不是独立窗口，只是widget的子部件"));
label2->resize(250, 20);
// 在屏幕上显示出来
label->show();       
widget->show();
```

+ label 是一个独立的窗口,label2被嵌入到了`widget`窗口中
+ 把没有嵌入到其他部件中的部件称为窗口
+ QMainWindow和大量的QDialog子类是最一般的窗口类型,窗口就是没有父部件的部件，所以又称为顶级部件,与其相对的是非窗口部件，又称为子部件

## 窗口类型

枚举类型`Qt::WindowFlags`

```cpp
namespace QT{
    //窗口类型
    enum WindowType{	
    }
    
    //窗口标志
    enum WindowFlags{    
    }
}
```

示例

```cpp
//创建窗口对象,其类型为 对话框
QWidget *widget = new QWidget(0, Qt::Dialog);
//创建一个文字标签,类型为 欢迎窗口
QLabel *label = new QLabel(0, Qt::SplashScreen);

//其他类型

Qt::FramelessWindowHint;	//产生一个没有边框的窗口
Qt::WindowStaysOnTopHint;	//该窗口停留在所有其它窗口上面
```

## 窗口几何布局

 

+ QT窗口坐标用`x,y`表示 x=0,y=0,表示左上角
+ 

```cpp
#include <QApplication>
#include <QWidget>
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    //创建一个窗口控件
    QWidget widget;
    //获取控制的x坐标
    int x = widget.x();
    //获取控件的y坐标
    int y = widget.y();
    //获取窗口矩形参数
    QRect geometry = widget.geometry();
    //获取包含边框大小的窗口大小
    QRect frame = widget.frameGeometry();
    return a.exec();
}

```

## 调试代码

调试代码的步骤

1. 使用Debug模式
1. 给需要调试的代码打上断点
1. 按<kbd>F11</kbd>,进行单步执行
1. 从变量监视器中进行内存查看

### 使用qDebug()函数

首先需要添加头文件

```cpp
#include <QDebug>
```

使用日志输出进行调试,比较方便,可以讲简单的参数输出到控制台

```cpp
QWidget widget;
    widget.resize(400, 300);       // 设置窗口大小
    widget.move(200, 100);         // 设置窗口位置
    widget.show();
    int x = widget.x();
    qDebug("x: %d", x);            // 输出x的值
    int y = widget.y();
    qDebug("y: %d", y);				// 输出y的值
    QRect geometry = widget.geometry();
    QRect frame = widget.frameGeometry();
    qDebug() << "geometry: " << geometry << "frame: " << frame;
```

第二种输出方式,类似于c++的输出

```cpp
qDebug() << "pos:" << widget.pos() << endl << "rect:" << widget.rect()
    << endl << "size:" << widget.size() << endl << "width:"
    << widget.width() << endl<< "height:" << widget.height();
```

## 对话框QDialog

### 模态和非模态对话框 

**模态**对话框就是在我们没有关闭它之前，不能再与同一个应用程序的其他窗口进行交互

```cpp
//使一个对话框成为模态对话框
QDialog dialog(this);
dialog.exec();
```

**非模态**对话框，既可以与它交互，也可以与同一程序中的其他窗口交互

```cpp
QDialog *dialog = new QDialog(this);
//设置为非模态
dialog->setModal(false);
dialog->show();
```

模态对话框的其他设置`setWindowModality`

```cpp
Qt::NonModal;//不阻塞任何窗口，就是非模态
Qt::WindowModal;//阻塞它的父窗口和所有祖先窗口以及它们的子窗口
Qt::ApplicationModal//阻塞整个应用程序的所有窗口
```

setModal()函数默认设置的是Qt::ApplicationModal

### 常见的对话框

+ 颜色对话框 
+ 文件对话框 
+ 字体对话框 
+ 输入对话框 
+ 消息对话框 
+ 进度对话框 
+ 错误信息对话框 
+ 向导对话框 

## 多窗口切换

### 信号和槽

使用connect进行关联,有4个参数

```cpp
//发送信号的对象
//发送的信号
//接收信号的对象
//要执行的槽
connect(ui->showChildButton, &QPushButton::clicked,
        this, &MyWidget::showChildDialog);
```

槽一般使用``public slots``关键字进行修饰

第二种方式是在设计界面上进行关联

## 其他窗口部件

+ QFrame类族 
+ 按钮部件 
+ 行编辑器
+ 数值设定框
+ 滑块部件

显示图片

```cpp
//在label控件中添加图片
ui->label->setPixmap(QPixmap("F:/logo.png"));

//显示gif动态图片
QMovie *movie = new QMovie("F:/donghua.gif");
ui->label->setMovie(movie);     // 在标签中添加动画
movie->start(); 
```

### 行编辑器QLineEdit

QLineEdit部件是一个单行的文本编辑器,它允许用户输入和编辑单行的纯文本内容

QLineEdit中也提供了强大的自动补全功能，这是利用QCompleter

```cpp
QStringList wordList;
wordList << "Qt" << "Qt Creator" << tr("你好");		//用来补全的代码
// 新建自动完成器
QCompleter *completer = new QCompleter(wordList, this); 
// 设置大小写不敏感
completer->setCaseSensitivity(Qt::CaseInsensitive); 
ui->lineEdit4->setCompleter(completer);

```

### 数值设定框

  `QAbstractSpinBox`类是一个抽象基类，它提供了一个数值设定框和一个行编辑器来显示设定值。它有三个子类：


+ QDateTimeEdit（日期时间设定）
+ QSpinBox（整数设定）
+ QDoubleSpinBox（浮点数的设定） 

QDateTimeEdit用于显示时间



```cpp
// 设置时间为现在的系统时间
ui->dateTimeEdit->setDateTime(QDateTime::currentDateTime());
// 设置时间的显示格式
ui->dateTimeEdit->setDisplayFormat(
                                 tr("yyyy年MM月dd日ddd HH时mm分ss秒"));

```

### 滑块部件

QAbstractSlider类提供了一个区间内的整数值，它有一个滑块，可以定位到一个整数区间的任意值。这个类是一个抽象基类

更多的是用在QScrollArea类中来实现滚动区域

+ `QScrollBar` 滚动条
+ `QSlider`常见的音量控制或多媒体播放进度等滑块；
+ `QDial`是一个刻度表盘

