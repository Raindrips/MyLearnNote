# 信号和槽



## 信号槽机制概念 overview

信号和槽机制是 QT 的核心机制，要精通 QT 编程就必须对信号和槽有所了解。信号和槽是一种高级接口，应用于对象之间的通信，它是 QT 的核心特性，也是 QT 区别于其它工具包的重要地方。

信号和槽是QT自行定义的通信机制，实现不同对象之间的数据交互。

### 信号
当用户或系统触发了一个动作，导致某个窗口部件的状态发生了改变，该部件就会发射一个信号，即调用其类中一个特定的成员函数，同时还可能携带有必要的参数

### 槽
槽几乎就是一个普通的类成员函数----可以是公有的、保护的或私有的，可以被重载，也可以被覆盖，其参数可以是任意类型，并可以在其它函数中被调用



## 信号和槽定义 history

### 创建信号 Create Signals

在类定义的第一行加入Q_OBJECT宏

```cpp
signals:
	//向类定义中加入信号的原型：
	void newName(QString &name);
```

使用`emit`发送信号

```cpp
QString name;
emit newName(name);
```

### 创建槽

第一行加入Q_OBJECT宏
```cpp
public slots:
//槽函数
void nameChanged(QString &name);
```

槽函数实现之后便可以通过信号连接了

## 信号和槽的连接 install

把槽和信号连接起来。
这个工作通常在构造函数中完成，但是如果这个对象构造得比较晚，那么连接工作也可以晚点做。
调用connect()方法把你的槽加入到方法列表中，每当指定的信号发出的时候，这个方法就会被调用。

必须是``QObject`的或者Qobject(Qwidget)的子类派生类才能有信号和槽.
通过调用 QObject 对象的 connect 函数来将某个对象的信号与另外一个对象的槽函数相关联，这样当发射者发射信号时，接收者的槽函数将被调用

可以按照以下的方式调用connect()方法：
```cpp
connect(const QObject * sender,   //信号发送对象
		  const char *signal,    //信号函数签名
		  const QObject *receiver, //信号接收对象
		  const char *method);		//槽函数签名
```

其中信号函数和槽函数的签名需要借助两个预定义宏

```cpp
SIGNAL()	 --将信号函数签名表示成字符串
SLOT()      --将槽函数的签名表示成字符串
```
例

```cpp
connect(button,SIGNAL(clicked()),this,SLOT(showArea()));
```

信号和槽是qt的最重要的机制,可以把不相干的对象绑定
 如果需要使用信号和槽机制,必须声明 Q_OBJECT

```cpp
//定义信号 
signals:
//定义槽
public slots:
```

取消关联:disconnect

断开与某个对象相关联的任何对象。这似乎有点不可理解，事实上，当我们在某个对象中定义了一个或者多个信号，这些信号与另外若干个对象中的槽相关联，如果我们要切断这些关联的话，就可以利用这个方法，非常之简洁

## 信号和槽连接  correlative microscopy

+ 一个信号可以被连接到多个槽函数（1对多）
+ 多个信号可以被连接到同一个槽函数(多对1)
+ 两个信号可以直接连接(信号级联)
+ 信号和槽参数要一致
+ 可以带有缺省参数
+ 信号函数的参数可以比槽函数多，多余的将被忽略

### 信号和槽机制的优点
+ 类型安全 type safety
+ 松散耦合  loose coupling


## 信号和槽函数的使用

+ **基类QObject:**任何需要使用元对象系统功能的类必须继承自QObject
+ **Q_OBJECT宏:** Q_OBJECT宏必须出现在类的私有声明区，用于启动元对象的特性
+ **元对象编辑器:** 为Object子类实现元对象特性提供必要的代码 实现



- [x] 

---
1
---
2
---





