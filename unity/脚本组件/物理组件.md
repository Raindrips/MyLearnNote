# 物理系统

## 碰撞检测

```
    两个或者两个以上的物体发生了接触，我们称为碰撞。程序代码监视到两个或两个以上物体发生了碰撞，我们称为检测；综合起来讲就是碰撞检测
```

检测分类

```
检测需要通过不同坐标系产生不同的检测        
2D坐标系：2D系统检测较为简单，一般使用AABB碰撞法，就是利用简单的几何图形相交认为碰撞；        
3D坐标系：3D系统比较复杂，碰撞也比较精细，使用立体几何边缘碰撞检测法
```

### 碰撞检测需要的条件

 碰撞必须要两个或两个以上的物体相互作用    

碰撞必须是两个动态或者一个动态一个静态物体发生碰撞    

**动态物体:**会发生运动变化的物体，他必须拥有运动特性->可以受到力的影响 

**静态物体:**没有运动特性的物体          

1. 两个物体之中，必须至少有一个具有刚体组件，并且这个刚体组件不能处于休眠状态，也不能是运动学刚体 

2. 两者必须都有碰撞器  
3.  如果一方是运动学刚体，另外一方必须是非运动学刚体
4. 如果一方使用的是网格碰撞器，那么可以在正面进行碰撞，如果想要与网格碰撞器的反面也能碰撞，需要勾选网格碰撞器的凸多边形选项。

### 刚体

他具有运动特性，在收到外力作用下可以保持物体的形状不发生改变，这样的组件，我们称为“刚体组件”;    

**用途**        

在游戏个体上提供基础力学        

刚体在引擎中我们可以提供力学关系让物体发生运动        

有个刚体证明这个物体就是运动物体        

我们可以去除重力特性，让其保持碰撞特性   

光有刚体不可以产生完整的碰撞检测

### 触发

带有碰撞效果

```C#
//碰撞开始
void OnCollisionEnter ( Collision col ) { }   

//碰撞结束
void OnCollisionExit ( Collision col ) { }       

//保持碰撞
void OnCollisionStay ( Collision col ) { }
```

不带有碰撞效果

```c#

void OnTriggerEnter( Collider col ) { }

void OnTriggerExit ( Collider col ) { }

void OnTriggerStay ( Collider col ) { }
```

## 刚体组件

### 属性

```
Mass
	物体质量(单位“千克”)
	注意：质量不能为0，而且质量尽量大于10，保持在[0.1 -- 10]范围内;
Drag
	平移方向的阻力
	他不代表物体和物体的接触阻力，他只表达空气对物体的阻力
Angluar Drag
	选择的空气角阻力
User Gravity
	是否使用重力
	这个选项表示你是否使用世界正方向上的下压力
Is Kinematic
	是否遵循牛顿物理学定律
	注意：如果为true，他会让刚体失去，力学、碰撞、万有引力；
Interpolate
	物理运动差值
	提供在物理运动上时候的逐帧渲染效果，如果使用该选择但是你的帧渲染不够快会导致物体的轻微抖动现象，所以我们建议这个属性尽量应用在主角身上而不是NPC身上
Collision Detection
	碰撞检测模式
Discrete
	非连续性碰撞，效率高但是精度很低，适用于慢动作物体
Continuous
	连续碰撞检测
	效率适中，精度有所提高，适用于汽车这样高速但是体积庞大的物体运动
ContinuousDynamic
	连续动态碰撞
	精度最高，但是效率最差，适用于体积较小碰撞紧密的运动物体，例如：炮弹
Constraints
	冻结平移运动和选择运动
	他可以讲物体的三个轴上的平移力忽略掉，也可以忽略三个轴上的旋转力。他和User Gravity 不一样，他是让这些轴永远不发生任何力的效果
```

## Physics API

+ Collision
+ Collider
+ Ray
+ RaycastHit
+ LayerMask